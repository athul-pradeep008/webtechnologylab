import React, { useState } from "react";

function LoanEligibilityChecker() {
  const [name, setName] = useState("");
  const [age, setAge] = useState("");
  const [salary, setSalary] = useState("");
  const [existingEmi, setExistingEmi] = useState("");
  const [loanAmount, setLoanAmount] = useState("");
  const [result, setResult] = useState("");
  const [color, setColor] = useState("");

  const checkEligibility = () => {
    // Validate inputs
    if (!name || !age || !salary || !existingEmi || !loanAmount) {
      setResult("Please fill in all the fields.");
      setColor("red");
      return;
    }

    const ageNum = Number(age);
    const salaryNum = Number(salary);
    const existingEmiNum = Number(existingEmi);
    const loanAmountNum = Number(loanAmount);

    if (
      isNaN(ageNum) ||
      isNaN(salaryNum) ||
      isNaN(existingEmiNum) ||
      isNaN(loanAmountNum)
    ) {
      setResult("Please enter valid numeric values.");
      setColor("red");
      return;
    }

    // Compute Proposed EMI (for simplicity, assume EMI = LoanAmount / 12)
    const proposedEmi = loanAmountNum / 12;

    // Compute DTI
    const dti = ((existingEmiNum + proposedEmi) / salaryNum) * 100;

    // Check conditions
    let reasons = [];

    if (dti > 60) reasons.push("DTI exceeds 60%");
    if (ageNum < 21 || ageNum > 60) reasons.push("Age not between 21 and 60");
    if (loanAmountNum > 10 * salaryNum)
      reasons.push("Loan amount exceeds 10 × Monthly Salary");

    if (reasons.length > 0) {
      setResult(`Not Eligible: ${reasons.join(", ")}`);
      setColor("red");
    } else {
      setResult("Eligible for Loan ✅");
      setColor("green");
    }
  };

  return (
    <div style={{ maxWidth: "500px", margin: "auto", fontFamily: "Arial" }}>
      <h2>Loan Eligibility Checker</h2>
      <div>
        <label>Name:</label>
        <input
          type="text"
          value={name}
          onChange={(e) => setName(e.target.value)}
          placeholder="Enter your name"
        />
      </div>
      <div>
        <label>Age:</label>
        <input
          type="number"
          value={age}
          onChange={(e) => setAge(e.target.value)}
          placeholder="Enter your age"
        />
      </div>
      <div>
        <label>Monthly Salary:</label>
        <input
          type="number"
          value={salary}
          onChange={(e) => setSalary(e.target.value)}
          placeholder="Enter monthly salary"
        />
      </div>
      <div>
        <label>Existing EMI/Debts:</label>
        <input
          type="number"
          value={existingEmi}
          onChange={(e) => setExistingEmi(e.target.value)}
          placeholder="Enter existing EMI"
        />
      </div>
      <div>
        <label>Loan Amount Requested:</label>
        <input
          type="number"
          value={loanAmount}
          onChange={(e) => setLoanAmount(e.target.value)}
          placeholder="Enter loan amount"
        />
      </div>
      <br />
      <button onClick={checkEligibility}>Check Loan Eligibility</button>
      <br />
      <p style={{ color: color, fontWeight: "bold" }}>{result}</p>
    </div>
  );
}

export default LoanEligibilityChecker;
